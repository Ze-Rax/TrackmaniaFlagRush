#Include "Libs/Nadeo/Layers2.Script.txt" as Layers

// Modules
#Include "Libs/Zrx/ModeLibs/Common/Commands/ModeCommands.Script.txt" as ModeCommands
#Include "Libs/Zrx/ModeLibs/FlagRush/UI/Modules/Header.Script.txt" as FlagRush_UIScoresHeader
#Include "Libs/Zrx/ModeLibs/FlagRush/UI/Modules/ScoresTable.Script.txt" as FlagRush_UIScoresTable
#Include "Libs/Zrx/ModeLibs/FlagRush/UI/Modules/Menu.Script.txt" as FlagRush_UIMenu
#Include "Libs/Zrx/ModeLibs/FlagRush/UI/Modules/Sound.Script.txt" as FlagRush_UISound

#Const C_LayerName_Dialog							"Layer_FlagRush_Dialog"
#Const C_LayerName_ScoresTable				"Layer_FlagRush_ScoresTable"
#Const C_LayerName_ScoresHeader				"Layer_FlagRush_ScoresHeader"
#Const C_LayerName_MVP								"Layer_FlagRush_MVP"
#Const C_LayerName_Markers						"Layer_FlagRush_Markers"
#Const C_LayerName_Menu								"Layer_FlagRush_Menu"
#Const C_LayerName_Feed								"Layer_FlagRush_Feed"
#Const C_LayerName_Flash							"Layer_FlagRush_Flash"
#Const C_LayerName_Sound							"Layer_FlagRush_Sound"
#Const C_LayerName_Spectator					"Layer_FlagRush_Spectator"
#Const C_LayerName_Respawn						"Layer_FlagRush_Respawn"
#Const C_LayerName_ModeCommands				"Layer_ModeCommands"
#Const C_LayerName_Radar							"Layer_FlagRush_Radar"

Void Private_LoadUIAll() {
	UIManager.UIAll.DisableZoomTransitions = False; // Spawn animation (camera-overview-to-car zoom effect)

	UIManager.UIAll.OverlayHideNotices = True;
	UIManager.UIAll.OverlayHideMapInfo = True;
	UIManager.UIAll.OverlayHideOpponentsInfo = True; // ?
	UIManager.UIAll.OverlayHideChat = False;
	UIManager.UIAll.OverlayHideCheckPointList = True;
	UIManager.UIAll.OverlayHideRoundScores = True;
	UIManager.UIAll.OverlayHideCountdown = True;
	UIManager.UIAll.OverlayHideCrosshair = True;
	UIManager.UIAll.OverlayHideGauges = True;
	UIManager.UIAll.OverlayHideConsumables = True;
	UIManager.UIAll.OverlayHide321Go = True;
	UIManager.UIAll.OverlayMute321Go = False;
	UIManager.UIAll.OverlayHideBackground = True; // ?
	UIManager.UIAll.OverlayHideChrono = True;
	UIManager.UIAll.OverlayHideSpeedAndDist = True;
	UIManager.UIAll.OverlayHidePersonnalBestAndRank = True;
	UIManager.UIAll.OverlayHidePosition = True;
	UIManager.UIAll.OverlayHideCheckPointTime = True;
	UIManager.UIAll.OverlayHideEndMapLadderRecap = True;
	UIManager.UIAll.OverlayHideMultilapInfos = True;
	UIManager.UIAll.OverlayHideSpectatorControllers = True;
	UIManager.UIAll.OverlayHideSpectatorInfos = True;
	UIManager.UIAll.OverlayChatHideAvatar = True;

	UIManager.UIAll.ScoreTableOnlyManialink = True; // Hide default simple score board

	UIManager.UIAll.TeamLabelsShowNames = CUIConfig::EVisibility::ForcedVisible;
	UIManager.UIAll.TeamLabelsVisibility = CUIConfig::ELabelsVisibility::WhenInFrustum;
	UIManager.UIAll.OpposingTeamLabelsShowNames = CUIConfig::EVisibility::ForcedVisible;
	UIManager.UIAll.OpposingTeamLabelsVisibility = CUIConfig::ELabelsVisibility::WhenVisible;
	UIManager.UIAll.LabelsVisibility = CUIConfig::EHudVisibility::Everything;
}

Void Private_AttachModules() {
	// Scores header
	Layers::Create(C_LayerName_ScoresHeader, FlagRush_UIScoresHeader::GetManialink());
	Layers::SetType(C_LayerName_ScoresHeader, CUILayer::EUILayerType::Normal);
	Layers::Attach(C_LayerName_ScoresHeader);

	// Scores table
	Layers::Create(C_LayerName_ScoresTable, FlagRush_UIScoresTable::GetManialink());
	Layers::SetType(C_LayerName_ScoresTable, CUILayer::EUILayerType::ScoresTable);
	Layers::Attach(C_LayerName_ScoresTable);

	// ModeCommands
	Layers::Create(C_LayerName_ModeCommands, ModeCommands::GetManialink());
	Layers::SetType(C_LayerName_ModeCommands, CUILayer::EUILayerType::Normal);
	Layers::Attach(C_LayerName_ModeCommands);

	// Sound
	Layers::Create(C_LayerName_Sound, FlagRush_UISound::GetManialink());
	Layers::SetType(C_LayerName_Sound, CUILayer::EUILayerType::Normal);
	Layers::Attach(C_LayerName_Sound);

	// Menu
	Layers::Create(C_LayerName_Menu, FlagRush_UIMenu::GetManialink());
	Layers::SetType(C_LayerName_Menu, CUILayer::EUILayerType::InGameMenu);
	Layers::Attach(C_LayerName_Menu);
}

Void Private_DetachModules() {
	Layers::Detach(C_LayerName_ScoresHeader);
	Layers::Detach(C_LayerName_ScoresTable);
	Layers::Detach(C_LayerName_ModeCommands);
	Layers::Detach(C_LayerName_Sound);
	Layers::Detach(C_LayerName_Menu);
}

Void Yield() {

}

Void Unload() {
	Private_DetachModules();
}

Void Load() {
	Unload();

	Private_LoadUIAll();
	Private_AttachModules();
}